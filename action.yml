name: 'markdown-link-check'
description: 'Check if all links are valid in markdown files.'
author: 'Gaurav Nelson'
branding:
  icon: 'link'  
  color: 'green'
inputs:
  use-quiet-mode:
    description: 'Use yes to enable markdown-link-check quiet mode which only list errors.'
    required: true
    default: 'no'
  use-verbose-mode:
    description: 'Use yes to enable markdown-link-check verbose mode which lists additional details.'
    required: true
    default: 'no'
  config-file:
    description: 'Specify path to a markdown-link-check JSON configuration file.'
    required: true
    default: 'mlc_config.json'
  folder-path:
    description: 'Specify path to a custom folder where your markdown files are located.'
    required: true
    default: '.'
  max-depth:
    description: 'Specify a max-depth of directories you want to search for markdown files.'
    required: true
    default: '-1'
  check-modified-files-only:
    description: 'Use yes to only check for modified markdown files instead of checking all markdown files.'
    required: true
    default: 'no'
  base-branch:
    description: 'Use this to specify the base branch against which the action finds the modififed files.'
    required: true
    default: 'master'
  file-extension:
    description: 'Use this to specify the file extension of Markdown files.'
    required: true
    default: '.md'
  file-path:
    description: 'Specify additional files you want to check'
    required: true
    default: ''

runs:
  using: 'composite'
  steps:
    - id: markdown-link-check
      run: $GITHUB_ACTION_PATH/entrypoint.sh
      shell: bash
      env:
        INPUT_USE_QUIET_MODE: ${{ inputs.use-quiet-mode }}
        INPUT_USE_VERBOSE_MODE: ${{ inputs.use-verbose-mode }}
        INPUT_CONFIG_FILE: ${{ inputs.config-file }}
        INPUT_FOLDER_PATH: ${{ inputs.folder-path }}
        INPUT_MAX_DEPTH: ${{ inputs.max-depth }}
        INPUT_CHECK_MODIFIED_FILES_ONLY: ${{ inputs.check-modified-files-only }}
        INPUT_BASE_BRANCH: ${{ inputs.base-branch }}
        INPUT_FILE_EXTENSION: ${{ inputs.file-extension }}
        INPUT_FILE_PATH: ${{ inputs.file-path }}
